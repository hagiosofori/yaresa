<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <script src='../js/jquery-3.1.1.min.js'></script>
    <script src="../bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../css/w3.css">
    <link rel="stylesheet" href="../css/index.css">
    <script src="../js/hamburger.js"></script>
    <script src="../Controllers/MembersController.js"></script>
</head>

<body>
    <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
    <!-- Sidebar -->
    <div id="wrapper">
        <nav class="navbar navbar-inverse navbar-fixed-top" id="sidebar-wrapper" role="navigation">
            <ul class="nav sidebar-nav">
                <li class="sidebar-brand">
                    <a href="../index.html">
                       Yaresa
                    </a>
                </li>
                <li>
                    <a href="records.html">Records</a>
                </li>
            </ul>
        </nav>
        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <button type="button" class="hamburger is-closed" data-toggle="offcanvas">
                <span class="hamb-top"></span>
    			<span class="hamb-middle"></span>
				<span class="hamb-bottom"></span>
            </button>

            <div class="container">
                <h1><span id="username">Member</span> Details</h1>

                <ul class="nav nav-tabs">
                    <li class="active"> <a data-toggle="tab" href="#opd">OPD</a></li>
                    <li><a data-toggle="tab" href="#vacrec">Vaccination</a></li>
                    <li><a data-toggle="tab" href="#famplan">Family Planning </a></li>
                </ul>

                <div class='tab-content'>
                    <div id="opd" class="tab-pane fade in active">
                        <br><button class='btn btn-primary btn-block' data-target="#addopd" data-toggle="modal">Add New OPD Record

                        </button>
                        <div id="opdrecords">OPD tab</div>
                    </div>
                    <div id="vacrec" class="tab-pane fade">
                        <br><button class='btn btn-primary btn-block' data-target="#addvac" data-toggle='modal'>Add New Vacation Record</button>
                        <div id="vacationrecords">Vaccination records tab</div>
                    </div>

                    <div id="famplan" class="tab-pane fade">
                        <br><button class='btn btn-primary btn-block' data-target='#addfam' data-toggle='modal'>Add New Family Planning Record</button>
                        <div id="familyPlanning">Family Planning tab</div>
                    </div>
                </div>




                <!--OPD Modal for adding new opd record-->
                <div id="addopd" class="modal fade" role="dialog">
                    <div class="modal-dialog">

                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">Enter Out Patient Dept. record details</h4>
                            </div>
                            <div class="modal-body">

                                <form>
                                    <div class='form-group'>
                                        <label>Case</label>
                                        <input type='text' placeholder='Case' class='form-control'>
                                    </div>
                                    <div class='form-group'>
                                        <label>Date</label>
                                        <input type='date' placeholder='Date' class='form-control'>
                                    </div>
                                    <div class='form-group'>

                                        <label>Lab Report</label>
                                        <input type='text' placeholder='Lab Report' class='form-control'>
                                    </div>
                                </form>

                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            </div>
                        </div>

                    </div>
                </div>


                <!-- Family Planning record modal-->
                <div id="addfam" class="modal fade" role="dialog">
                    <div class="modal-dialog">

                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">Enter Family Planning record details</h4>
                            </div>
                            <div class="modal-body">
                                <form>
                                    <div class='form-group'>
                                        <label>Service</label>
                                        <input type='text' placeholder='Case' class='form-control'>
                                    </div>
                                    <div class='form-group'>
                                        <label>Date</label>
                                        <input type='date' placeholder='Date' class='form-control'>
                                    </div>
                                    <div class='form-group'>
                                        <label>Service Schedule</label>
                                        <input type='text' placeholder='Lab Report' class='form-control'>
                                    </div>
                                    <div class='form-group'>
                                        <label>Service Type</label>
                                        <input type='text' placeholder='Lab Report' class='form-control'>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            </div>
                        </div>

                    </div>
                </div>


                <div id="addvac" class="modal fade" role="dialog">
                    <div class="modal-dialog">

                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">Modal Header</h4>
                            </div>
                            <div class="modal-body">
                                <p>Some text in the modal.</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            </div>
                        </div>

                    </div>
                </div>

                <script src="../Controllers/MembersController.js"></script>

                <script>
                    window.onload = function () {
                        hamburger();
                        displayDetails();
                    }

                    var members = [
                        {
                            id: 1,
                            firstname: 'alvin',
                            lastname: 'ofori',
                            cardnumber: '12345',
                            stored: 'true',
                            gender: 'M',
                            opdRecords: [
                                {
                                    opdCaseID: 1,
                                    recordDate: '12/12/12',
                                    serverRecordNumber: 1,
                                    recorded: true,
                                    labReport: 'something',
                                },
                            ],
                            vaccinationRecords: [

                            ],
                            familyPlanningRecords: [

                            ],
                        },
                        {
                            id: 2,
                            firstname: 'florence',
                            lastname: 'bota',
                            cardnumber: '54322',
                            stored: 'false',
                            gender: 'F',
                            opdRecords: [
                                {
                                    opdCaseID: 2,
                                    recordDate: '12/12/12',
                                    serverRecordNumber: 2,
                                    recorded: true,
                                    labReport: 'something',
                                },
                                {
                                    opdCaseID: 3,
                                    recordDate: '1/12/15',
                                    serverRecordNumber: 2,
                                    recorded: true,
                                    labReport: 'something2',
                                }
                            ],
                            vaccinationRecords: [

                            ],
                            familyPlanningRecords: [

                            ],
                        }
                    ];

                    //function to display details of selected member in DetailsView.
                    function displayDetails(memberid) {
                        //display patient's name on the page
                        var currentMember = members[1];
                        document.getElementById('username').innerHTML = currentMember.firstname + ' ' + currentMember.lastname + "'s";

                        console.log('in displayDetails with ' + currentMember.opdRecords);
                        //show the details in their respective panes.
                        var opdDiv = document.getElementById('opdrecords');
                        var vacDiv = document.getElementById('vacationrecords');
                        var famDiv = document.getElementById('familyPlanning');

                        var opdTable = "<table class='table table-striped table-responsive'><tr><th>Date</th><th>Lab Report</th><th>Actions</th></tr>";

                        var vacTable = "<table class='table table-striped table-responsive'><tr><th>Vaccine</th><th>Vaccine Date</th><th>Actions</th></tr>";

                        var famTable = "<table class='table table-striped table-responsive'><tr><th>Service</th><th>Date</th><th>Quantity</th><th>Service Schedule</th><th>Service Type</th><th>Actions</th></tr>"

                        //filling opd values on page.
                        currentMember.opdRecords.forEach(function (element, index) {
                            opdTable += "<tr><td>" + element.recordDate + "</td><td>" + element.labReport + "</td><td><div class='btn-group'><button class='btn btn-primary' onclick='#'>Edit</button><button class='btn btn-primary' onclick='#'>Delete</button></div></td></tr>"
                        }, this);
                        opdTable += '</table>';
                        opdDiv.innerHTML = opdTable;

                        //filling vaccination details on page.
                        currentMember.vaccinationRecords.forEach(function (element, index) {
                            vacTable += "<tr><td>" + element.vaccine + "</td><td>" + element.date + "</td><td><div class='btn-group-vertical'><button class='btn-primary btn' onclick='#'>Edit</button> <button class='btn btn-primary' onclick='#'>Delete</button></div></td></tr>"
                        }, this);
                        vacTable += '</table>';
                        vacDiv.innerHTML = vacTable;

                        currentMember.familyPlanningRecords.forEach(function (element, index) {
                            famTable += "<tr><td>" + element.service + "</td><td>" + element.labReport + "</td><td>" + element.date + "</td><td>" + element.quantity + "</td><td>" + element.serviceSchedule + "</td><td><div class='btn-group'> <button class='btn btn-primary' onclick='#'>Edit</button> <button class='btn btn-primary' onclick='#'>Delete</button></div></td></tr>"
                        }, this);
                        famTable += '</table>';
                        famDiv.innerHTML = famTable;

                    }
                </script>
</body>

</html>